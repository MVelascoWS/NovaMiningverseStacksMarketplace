{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeToken = void 0;\n\nconst base64url_1 = require(\"base64url\");\n\nfunction decodeToken(token) {\n  if (typeof token === 'string') {\n    // decompose the token into parts\n    const tokenParts = token.split('.');\n    const header = JSON.parse(base64url_1.default.decode(tokenParts[0]));\n    const payload = JSON.parse(base64url_1.default.decode(tokenParts[1]));\n    const signature = tokenParts[2]; // return the token object\n\n    return {\n      header: header,\n      payload: payload,\n      signature: signature\n    };\n  } else if (typeof token === 'object') {\n    if (typeof token.payload !== 'string') {\n      throw new Error('Expected token payload to be a base64 or json string');\n    }\n\n    let payload = token.payload;\n\n    if (token.payload[0] !== '{') {\n      payload = base64url_1.default.decode(payload);\n    }\n\n    const allHeaders = [];\n    token.header.map(headerValue => {\n      const header = JSON.parse(base64url_1.default.decode(headerValue));\n      allHeaders.push(header);\n    });\n    return {\n      header: allHeaders,\n      payload: JSON.parse(payload),\n      signature: token.signature\n    };\n  }\n}\n\nexports.decodeToken = decodeToken;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAsBA,SAAgBA,WAAhB,CAA4BC,KAA5B,EAA0D;EACxD,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;IAC7B;IACA,MAAMC,UAAU,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAnB;IACA,MAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWC,oBAAUC,MAAV,CAAiBN,UAAU,CAAC,CAAD,CAA3B,CAAX,CAAf;IACA,MAAMO,OAAO,GAAGJ,IAAI,CAACC,KAAL,CAAWC,oBAAUC,MAAV,CAAiBN,UAAU,CAAC,CAAD,CAA3B,CAAX,CAAhB;IACA,MAAMQ,SAAS,GAAGR,UAAU,CAAC,CAAD,CAA5B,CAL6B,CAO7B;;IACA,OAAO;MACLE,MAAM,EAAEA,MADH;MAELK,OAAO,EAAEA,OAFJ;MAGLC,SAAS,EAAEA;IAHN,CAAP;EAKD,CAbD,MAaO,IAAI,OAAOT,KAAP,KAAiB,QAArB,EAA+B;IACpC,IAAI,OAAOA,KAAK,CAACQ,OAAb,KAAyB,QAA7B,EAAuC;MACrC,MAAM,IAAIE,KAAJ,CAAU,sDAAV,CAAN;IACD;;IACD,IAAIF,OAAO,GAAGR,KAAK,CAACQ,OAApB;;IACA,IAAIR,KAAK,CAACQ,OAAN,CAAc,CAAd,MAAqB,GAAzB,EAA8B;MAC5BA,OAAO,GAAGF,oBAAUC,MAAV,CAAiBC,OAAjB,CAAV;IACD;;IAED,MAAMG,UAAU,GAAQ,EAAxB;IACCX,KAAK,CAACG,MAAN,CAAqBS,GAArB,CAA0BC,WAAD,IAAwB;MAChD,MAAMV,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWC,oBAAUC,MAAV,CAAiBM,WAAjB,CAAX,CAAf;MACAF,UAAU,CAACG,IAAX,CAAgBX,MAAhB;IACD,CAHA;IAKD,OAAO;MACLA,MAAM,EAAEQ,UADH;MAELH,OAAO,EAAEJ,IAAI,CAACC,KAAL,CAAWG,OAAX,CAFJ;MAGLC,SAAS,EAAET,KAAK,CAACS;IAHZ,CAAP;EAKD;AACF;;AAnCDM","names":["decodeToken","token","tokenParts","split","header","JSON","parse","base64url_1","decode","payload","signature","Error","allHeaders","map","headerValue","push","exports"],"sources":["decode.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}