{"version":3,"file":"connect.cjs.development.js","sources":["../src/utils.ts","../src/auth.ts","../src/types/transactions.ts","../src/transactions/index.ts","../src/signature/index.ts","../src/signature/structuredData.ts","../src/ui.ts"],"sourcesContent":["export function getStacksProvider() {\n  return window.StacksProvider || window.BlockstackProvider;\n}\n\nexport function isStacksWalletInstalled() {\n  return !!getStacksProvider();\n}\n","import { AppConfig, UserSession } from '@stacks/auth';\nimport { decodeToken } from 'jsontokens';\nimport type { AuthOptions, AuthResponsePayload } from './types';\n\nimport { getStacksProvider } from './utils';\n\nexport const defaultAuthURL = 'https://app.blockstack.org';\n\nconst version = __VERSION__;\n\nif (typeof window !== 'undefined') {\n  window.__CONNECT_VERSION__ = version;\n}\n\nexport const isMobile = () => {\n  const ua = navigator.userAgent;\n  if (/android/i.test(ua)) {\n    return true;\n  }\n  if (/iPad|iPhone|iPod/.test(ua)) {\n    return true;\n  }\n  return /windows phone/i.test(ua);\n};\n\n/**\n * mobile should not use a 'popup' type of window.\n */\nexport const shouldUsePopup = () => {\n  return !isMobile();\n};\n\nexport const getOrCreateUserSession = (userSession?: UserSession): UserSession => {\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nexport const authenticate = async (authOptions: AuthOptions) => {\n  const provider = getStacksProvider();\n  if (!provider) {\n    throw new Error('Unable to authenticate without Hiro Wallet extension');\n  }\n\n  const {\n    redirectTo = '/',\n    manifestPath,\n    onFinish,\n    onCancel,\n    sendToSignIn = false,\n    userSession: _userSession,\n    appDetails,\n  } = authOptions;\n  const userSession = getOrCreateUserSession(_userSession);\n  if (userSession.isUserSignedIn()) {\n    userSession.signUserOut();\n  }\n  const transitKey = userSession.generateAndStoreTransitKey();\n  const authRequest = userSession.makeAuthRequest(\n    transitKey,\n    `${document.location.origin}${redirectTo}`,\n    `${document.location.origin}${manifestPath}`,\n    userSession.appConfig.scopes,\n    undefined,\n    undefined,\n    {\n      sendToSignIn,\n      appDetails,\n      connectVersion: version,\n    }\n  );\n\n  try {\n    const authResponse = await provider.authenticationRequest(authRequest);\n    await userSession.handlePendingSignIn(authResponse);\n    const token = decodeToken(authResponse);\n    const payload = token?.payload;\n    const authResponsePayload = payload as unknown as AuthResponsePayload;\n    onFinish?.({\n      authResponse,\n      authResponsePayload,\n      userSession,\n    });\n  } catch (error) {\n    console.error('[Connect] Error during auth request', error);\n    onCancel?.();\n  }\n};\n\nexport const getUserData = async (userSession?: UserSession) => {\n  userSession = getOrCreateUserSession(userSession);\n  if (userSession.isUserSignedIn()) {\n    return userSession.loadUserData();\n  }\n  if (userSession.isSignInPending()) {\n    return userSession.handlePendingSignIn();\n  }\n  return null;\n};\n","import { UserSession } from '@stacks/auth';\nimport type { AuthOptions } from '../types/auth';\nimport {\n  PostConditionMode,\n  PostCondition,\n  AnchorMode,\n  ClarityValue,\n  StacksTransaction,\n} from '@stacks/transactions';\nimport { StacksNetwork } from '@stacks/network';\nimport BN from 'bn.js';\n\nexport interface TxBase {\n  appDetails?: AuthOptions['appDetails'];\n  postConditionMode?: PostConditionMode;\n  postConditions?: (string | PostCondition)[];\n  network?: StacksNetwork;\n  anchorMode?: AnchorMode;\n  attachment?: string;\n  fee?: number | string;\n  /**\n   * Provide the Hiro Wallet with a suggested account to sign this transaction with.\n   * This is set by default if a `userSession` option is provided.\n   */\n  stxAddress?: string;\n  /** @deprecated `unused - only included for compatibility with @stacks/transactions` */\n  senderKey?: string;\n  /** @deprecated `unused - only included for compatibility with @stacks/transactions` */\n  nonce?: number;\n}\n\nexport interface SponsoredFinishedTxPayload {\n  txRaw: string;\n}\n\nexport interface SponsoredFinishedTxData extends SponsoredFinishedTxPayload {\n  stacksTransaction: StacksTransaction;\n}\n\nexport interface FinishedTxPayload extends SponsoredFinishedTxPayload {\n  txId: string;\n}\n\nexport interface FinishedTxData extends FinishedTxPayload {\n  stacksTransaction: StacksTransaction;\n}\n\nexport enum TransactionTypes {\n  ContractCall = 'contract_call',\n  ContractDeploy = 'smart_contract',\n  STXTransfer = 'token_transfer',\n}\n\n/**\n * Contract Call\n */\n\nexport enum ContractCallArgumentType {\n  BUFFER = 'buffer',\n  UINT = 'uint',\n  INT = 'int',\n  PRINCIPAL = 'principal',\n  BOOL = 'bool',\n}\n\nexport interface ContractCallBase extends TxBase {\n  contractAddress: string;\n  contractName: string;\n  functionName: string;\n  functionArgs: (string | ClarityValue)[];\n}\n\nexport interface OptionsBase {\n  /**\n   * @deprecated Authentication is no longer supported through a hosted\n   * version. Users must install an extension.\n   */\n  authOrigin?: string;\n  userSession?: UserSession;\n}\n\nexport type SponsoredFinished = (data: SponsoredFinishedTxData) => void;\nexport type Finished = (data: FinishedTxData) => void;\nexport type Canceled = () => void;\n\nexport interface SponsoredOptionsBase extends TxBase, OptionsBase {\n  sponsored: true;\n  onFinish?: SponsoredFinished;\n  onCancel?: Canceled;\n}\n\nexport interface RegularOptionsBase extends TxBase, OptionsBase {\n  sponsored?: false;\n  onFinish?: Finished;\n  onCancel?: Canceled;\n}\n\nexport type ContractCallRegularOptions = ContractCallBase & RegularOptionsBase;\nexport type ContractCallSponsoredOptions = ContractCallBase & SponsoredOptionsBase;\nexport type ContractCallOptions = ContractCallRegularOptions | ContractCallSponsoredOptions;\n\nexport interface ContractCallArgument {\n  type: ContractCallArgumentType;\n  value: string;\n}\n\nexport interface ContractCallPayload extends ContractCallBase {\n  txType: TransactionTypes.ContractCall;\n  publicKey: string;\n  functionArgs: string[];\n  sponsored?: boolean;\n}\n\n/**\n * Contract Deploy\n */\nexport interface ContractDeployBase extends TxBase {\n  contractName: string;\n  codeBody: string;\n}\n\nexport type ContractDeployRegularOptions = ContractDeployBase & RegularOptionsBase;\nexport type ContractDeploySponsoredOptions = ContractDeployBase & SponsoredOptionsBase;\nexport type ContractDeployOptions = ContractDeployRegularOptions | ContractDeploySponsoredOptions;\n\nexport interface ContractDeployPayload extends ContractDeployBase {\n  publicKey: string;\n  txType: TransactionTypes.ContractDeploy;\n  sponsored?: boolean;\n}\n\n/**\n * STX Transfer\n */\n\nexport interface STXTransferBase extends TxBase {\n  recipient: string;\n  amount: BN | string;\n  memo?: string;\n}\n\nexport type STXTransferRegularOptions = STXTransferBase & RegularOptionsBase;\nexport type STXTransferSponsoredOptions = STXTransferBase & SponsoredOptionsBase;\nexport type STXTransferOptions = STXTransferRegularOptions | STXTransferSponsoredOptions;\n\nexport interface STXTransferPayload extends STXTransferBase {\n  publicKey: string;\n  txType: TransactionTypes.STXTransfer;\n  amount: string;\n  sponsored?: boolean;\n}\n\n/**\n * Transaction Popup\n */\n\nexport type TransactionOptions = ContractCallOptions | ContractDeployOptions | STXTransferOptions;\nexport type TransactionPayload = ContractCallPayload | ContractDeployPayload | STXTransferPayload;\n\nexport interface TransactionPopup {\n  token: string;\n  options: TransactionOptions;\n}\n","import { UserSession, AppConfig } from '@stacks/auth';\nimport { createUnsecuredToken, Json, SECP256K1Client, TokenSigner } from 'jsontokens';\nimport {\n  ContractCallOptions,\n  ContractCallPayload,\n  ContractDeployOptions,\n  ContractDeployPayload,\n  TransactionPopup,\n  TransactionOptions,\n  STXTransferOptions,\n  STXTransferPayload,\n  TransactionPayload,\n  TransactionTypes,\n  STXTransferSponsoredOptions,\n  STXTransferRegularOptions,\n  ContractDeployRegularOptions,\n  ContractDeploySponsoredOptions,\n  ContractCallRegularOptions,\n  ContractCallSponsoredOptions,\n  SponsoredFinishedTxPayload,\n  FinishedTxPayload,\n} from '../types/transactions';\nimport {\n  serializeCV,\n  ChainID,\n  deserializeTransaction,\n  BufferReader,\n  serializePostCondition,\n  PostCondition,\n} from '@stacks/transactions';\nimport { getStacksProvider } from '../utils';\nimport { StacksTestnet } from '@stacks/network';\n\n// TODO extract out of transactions\nexport const getUserSession = (_userSession?: UserSession) => {\n  let userSession = _userSession;\n\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nfunction hasUserSession(userSession?: UserSession) {\n  try {\n    getUserSession(userSession).loadUserData();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport const getKeys = (_userSession?: UserSession) => {\n  const userSession = getUserSession(_userSession);\n  const privateKey = userSession.loadUserData().appPrivateKey;\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n\n  return { privateKey, publicKey };\n};\n\n// TODO extract out of transactions\nexport function getStxAddress(options: TransactionOptions) {\n  const { stxAddress, userSession, network } = options;\n\n  if (stxAddress) return stxAddress;\n  if (!userSession || !network) return undefined;\n  const stxAddresses = userSession?.loadUserData().profile?.stxAddress;\n  const chainIdToKey = {\n    [ChainID.Mainnet]: 'mainnet',\n    [ChainID.Testnet]: 'testnet',\n  };\n  const address: string | undefined = stxAddresses?.[chainIdToKey[network.chainId]];\n  return address;\n}\n\nfunction getDefaults(options: TransactionOptions) {\n  const network = options.network || new StacksTestnet();\n\n  // Legacy auth using localstorage with appPrivateKey\n  if (hasUserSession(options.userSession)) {\n    const userSession = getUserSession(options.userSession);\n    const defaults: TransactionOptions = {\n      ...options,\n      network,\n      userSession,\n    };\n\n    return {\n      stxAddress: getStxAddress(defaults),\n      ...defaults,\n    };\n  }\n\n  // User has not authed, we're relying on the app having previously having been\n  // given permissions from  `stx_requestAccounts`, and the wallet recognising the app's origin\n  const hasSetRequiredStxAddressPropForRequestAccountFlow = 'stxAddress' in options;\n  if (!hasSetRequiredStxAddressPropForRequestAccountFlow) {\n    throw new Error(\n      'Must set property `stxAddress` when using `stx_requestAccounts to initiate transaction`'\n    );\n  }\n  return { ...options, network };\n}\n\nfunction encodePostConditions(postConditions: PostCondition[]) {\n  return postConditions.map(pc => serializePostCondition(pc).toString('hex'));\n}\n\nasync function signPayload(payload: TransactionPayload, privateKey: string) {\n  let { postConditions } = payload;\n  if (postConditions && typeof postConditions[0] !== 'string') {\n    postConditions = encodePostConditions(postConditions as PostCondition[]);\n  }\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  return tokenSigner.signAsync({ ...payload, postConditions } as any);\n}\n\nfunction createUnsignedPayload(payload: Partial<TransactionPayload>) {\n  let { postConditions } = payload;\n  if (postConditions && typeof postConditions[0] !== 'string') {\n    postConditions = encodePostConditions(postConditions as PostCondition[]);\n  }\n  return createUnsecuredToken({ ...payload, postConditions } as unknown as Json);\n}\n\nconst openTransactionPopup = async ({ token, options }: TransactionPopup) => {\n  const provider = getStacksProvider();\n  if (!provider) {\n    throw new Error('Hiro Wallet not installed');\n  }\n\n  try {\n    const txResponse = await provider.transactionRequest(token);\n    const { txRaw } = txResponse;\n    const txBuffer = Buffer.from(txRaw.replace(/^0x/, ''), 'hex');\n    const stacksTransaction = deserializeTransaction(new BufferReader(txBuffer));\n\n    if ('sponsored' in options && options.sponsored) {\n      options.onFinish?.({\n        ...(txResponse as SponsoredFinishedTxPayload),\n        stacksTransaction,\n      });\n      return;\n    }\n    options.onFinish?.({\n      ...(txResponse as FinishedTxPayload),\n      stacksTransaction,\n    });\n  } catch (error) {\n    console.error('[Connect] Error during transaction request', error);\n    options.onCancel?.();\n  }\n};\n\nexport const makeContractCallToken = async (options: ContractCallOptions) => {\n  const { functionArgs, appDetails, userSession, ..._options } = options;\n\n  const args: string[] = functionArgs.map(arg => {\n    if (typeof arg === 'string') {\n      return arg;\n    }\n    return serializeCV(arg).toString('hex');\n  });\n  if (hasUserSession(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: ContractCallPayload = {\n      ..._options,\n      functionArgs: args,\n      txType: TransactionTypes.ContractCall,\n      publicKey,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n  const payload: Partial<ContractCallPayload> = {\n    ..._options,\n    functionArgs: args,\n    txType: TransactionTypes.ContractCall,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedPayload(payload);\n};\n\nexport const makeContractDeployToken = async (options: ContractDeployOptions) => {\n  const { appDetails, userSession, ..._options } = options;\n  if (hasUserSession(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: ContractDeployPayload = {\n      ..._options,\n      publicKey,\n      txType: TransactionTypes.ContractDeploy,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<ContractDeployPayload> = {\n    ..._options,\n    txType: TransactionTypes.ContractDeploy,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedPayload(payload);\n};\n\nexport const makeSTXTransferToken = async (options: STXTransferOptions) => {\n  const { amount, appDetails, userSession, ..._options } = options;\n\n  if (hasUserSession(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: STXTransferPayload = {\n      ..._options,\n      amount: amount.toString(10),\n      publicKey,\n      txType: TransactionTypes.STXTransfer,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<STXTransferPayload> = {\n    ..._options,\n    amount: amount.toString(10),\n    txType: TransactionTypes.STXTransfer,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedPayload(payload);\n};\n\nasync function generateTokenAndOpenPopup<T extends TransactionOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>\n) {\n  const token = await makeTokenFn({\n    ...getDefaults(options),\n    ...options,\n  } as T);\n  return openTransactionPopup({ token, options });\n}\n\nexport function openContractCall(options: ContractCallRegularOptions): Promise<void>;\nexport function openContractCall(options: ContractCallSponsoredOptions): Promise<void>;\nexport function openContractCall(options: ContractCallOptions): Promise<void>;\nexport function openContractCall(options: ContractCallOptions) {\n  return generateTokenAndOpenPopup(options, makeContractCallToken);\n}\n\nexport function openContractDeploy(options: ContractDeployRegularOptions): Promise<void>;\nexport function openContractDeploy(options: ContractDeploySponsoredOptions): Promise<void>;\nexport function openContractDeploy(options: ContractDeployOptions): Promise<void>;\nexport function openContractDeploy(options: ContractDeployOptions) {\n  return generateTokenAndOpenPopup(options, makeContractDeployToken);\n}\n\nexport function openSTXTransfer(options: STXTransferRegularOptions): Promise<void>;\nexport function openSTXTransfer(options: STXTransferSponsoredOptions): Promise<void>;\nexport function openSTXTransfer(options: STXTransferOptions): Promise<void>;\nexport function openSTXTransfer(options: STXTransferOptions) {\n  return generateTokenAndOpenPopup(options, makeSTXTransferToken);\n}\n","import { StacksTestnet } from '@stacks/network';\nimport { ChainID } from '@stacks/transactions';\nimport { TokenSigner } from 'jsontokens';\nimport { getKeys, getUserSession } from '../transactions';\nimport {\n  CommonSignatureRequestOptions,\n  SignatureOptions,\n  SignaturePayload,\n  SignaturePopup,\n  SignatureRequestOptions,\n} from '../types/signature';\nimport { getStacksProvider } from '../utils';\n\nfunction getStxAddress(options: CommonSignatureRequestOptions) {\n  const { userSession, network } = options;\n\n  if (!userSession || !network) return undefined;\n  const stxAddresses = userSession?.loadUserData().profile?.stxAddress;\n  const chainIdToKey = {\n    [ChainID.Mainnet]: 'mainnet',\n    [ChainID.Testnet]: 'testnet',\n  };\n  const address: string | undefined = stxAddresses?.[chainIdToKey[network.chainId]];\n  return address;\n}\n\nexport function getDefaultSignatureRequestOptions(options: CommonSignatureRequestOptions) {\n  const network = options.network || new StacksTestnet();\n  const userSession = getUserSession(options.userSession);\n  const defaults: CommonSignatureRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    stxAddress: getStxAddress(defaults),\n    ...defaults,\n  };\n}\n\nasync function signPayload(payload: SignaturePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({\n    ...payload,\n  } as any);\n}\n\nasync function openSignaturePopup({ token, options }: SignaturePopup) {\n  const provider = getStacksProvider();\n  if (!provider) {\n    throw new Error('Hiro Wallet not installed.');\n  }\n\n  try {\n    const signatureResponse = await provider.signatureRequest(token);\n\n    options.onFinish?.(signatureResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\nexport interface SignatureRequestPayload {\n  message: string;\n}\n\nexport const signMessage = async (options: SignatureRequestOptions) => {\n  const { userSession, ..._options } = options;\n  const { privateKey, publicKey } = getKeys(userSession);\n\n  const payload: SignaturePayload = {\n    ..._options,\n    publicKey,\n  };\n\n  return signPayload(payload, privateKey);\n};\n\nasync function generateTokenAndOpenPopup<T extends SignatureOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>\n) {\n  const token = await makeTokenFn({\n    ...getDefaultSignatureRequestOptions(options),\n    ...options,\n  } as T);\n  return openSignaturePopup({ token, options });\n}\n\nexport function openSignatureRequestPopup(options: SignatureRequestOptions) {\n  return generateTokenAndOpenPopup(options, signMessage);\n}\n","import { serializeCV } from '@stacks/transactions';\nimport { TokenSigner } from 'jsontokens';\nimport { getDefaultSignatureRequestOptions } from '.';\nimport { getKeys } from '../transactions';\nimport {\n  StructuredDataSignatureOptions,\n  StructuredDataSignaturePayload,\n  StructuredDataSignaturePopup,\n  StructuredDataSignatureRequestOptions,\n} from '../types/structuredDataSignature';\nimport { getStacksProvider } from '../utils';\n\nasync function generateTokenAndOpenPopup<T extends StructuredDataSignatureOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>\n) {\n  const token = await makeTokenFn({\n    ...getDefaultSignatureRequestOptions(options),\n    ...options,\n  } as T);\n  return openStructuredDataSignaturePopup({ token, options });\n}\n\nasync function signPayload(payload: StructuredDataSignaturePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({\n    ...payload,\n    message: serializeCV(payload.message).toString('hex'),\n    domain: serializeCV(payload.domain).toString('hex'),\n  } as any);\n}\n\nexport async function signStructuredMessage(options: StructuredDataSignatureRequestOptions) {\n  const { userSession, ..._options } = options;\n  const { privateKey, publicKey } = getKeys(userSession);\n\n  const payload: StructuredDataSignaturePayload = {\n    ..._options,\n    publicKey,\n  };\n\n  return signPayload(payload, privateKey);\n}\n\nasync function openStructuredDataSignaturePopup({ token, options }: StructuredDataSignaturePopup) {\n  const provider = getStacksProvider();\n  if (!provider) {\n    throw new Error('Hiro Wallet not installed.');\n  }\n\n  try {\n    const signatureResponse = await provider.structuredDataSignatureRequest(token);\n\n    options.onFinish?.(signatureResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\nexport function openStructuredDataSignatureRequestPopup(\n  options: StructuredDataSignatureRequestOptions\n) {\n  return generateTokenAndOpenPopup(options, signStructuredMessage);\n}\n","import { authenticate } from './auth';\nimport type { AuthOptions } from './types/auth';\nimport { defineCustomElements } from '@stacks/connect-ui/loader';\nimport { getStacksProvider } from './utils';\n\nexport const showConnect = (authOptions: AuthOptions) => {\n  if (getStacksProvider()) {\n    void authenticate(authOptions);\n    return;\n  }\n  if (typeof window !== undefined) {\n    void defineCustomElements(window);\n    const element = document.createElement('connect-modal');\n    element.authOptions = authOptions;\n    document.body.appendChild(element);\n    const handleEsc = (ev: KeyboardEvent) => {\n      if (ev.key === 'Escape') {\n        document.removeEventListener('keydown', handleEsc);\n        element.remove();\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n  }\n};\n\n/**\n * @deprecated Use the renamed `showConnect` method\n */\nexport const showBlockstackConnect = (authOptions: AuthOptions) => showConnect(authOptions);\n"],"names":["window","StacksProvider","BlockstackProvider","getStacksProvider","defaultAuthURL","version","__VERSION__","__CONNECT_VERSION__","isMobile","ua","navigator","userAgent","test","shouldUsePopup","getOrCreateUserSession","userSession","appConfig","AppConfig","document","location","href","UserSession","authenticate","authOptions","provider","Error","redirectTo","manifestPath","onFinish","onCancel","sendToSignIn","_userSession","appDetails","isUserSignedIn","signUserOut","transitKey","generateAndStoreTransitKey","authRequest","makeAuthRequest","origin","scopes","connectVersion","authenticationRequest","authResponse","handlePendingSignIn","token","decodeToken","payload","authResponsePayload","error","getUserData","loadUserData","isSignInPending","TransactionTypes2","TransactionTypes","ContractCallArgumentType2","ContractCallArgumentType","getUserSession","e","getKeys","privateKey","appPrivateKey","publicKey","SECP256K1Client","derivePublicKey","options","stxAddress","network","stxAddresses","profile","chainIdToKey","ChainID","Mainnet","Testnet","address","chainId","StacksTestnet","hasUserSession","defaults","getStxAddress","hasSetRequiredStxAddressPropForRequestAccountFlow","postConditions","map","serializePostCondition","pc","toString","encodePostConditions","tokenSigner","TokenSigner","signAsync","createUnsecuredToken","openTransactionPopup","transactionRequest","txResponse","txRaw","txBuffer","Buffer","from","replace","stacksTransaction","deserializeTransaction","BufferReader","sponsored","makeContractCallToken","functionArgs","_options","args","arg","serializeCV","payload2","txType","ContractCall","signPayload","createUnsignedPayload","makeContractDeployToken","ContractDeploy","makeSTXTransferToken","amount","STXTransfer","makeTokenFn","getDefaults","generateTokenAndOpenPopup","signatureRequest","signatureResponse","signMessage","getDefaultSignatureRequestOptions","openSignaturePopup","openStructuredDataSignaturePopup","message","domain","structuredDataSignatureRequest","signStructuredMessage","showConnect","defineCustomElements","element","createElement","body","appendChild","handleEsc","ev","key","removeEventListener","remove","addEventListener","showBlockstackConnect"],"mappings":"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"}